# THIS IS AUTOGENERATED. DO NOT EDIT MANUALLY
version = 1
name = "cline"

[setup]
script = '''
if [ ! -d "node_modules" ]; then
  MAIN_WORKTREE="$(git worktree list | head -n1 | awk '{print $1}')"
  ln -s "$MAIN_WORKTREE/node_modules" node_modules
  ln -s "$MAIN_WORKTREE/webview-ui/node_modules" webview-ui/node_modules
fi
'''

[[actions]]
name = "VS Code"
icon = "run"
command = "chmod +x ./scripts/run-extension-host.sh && ./scripts/run-extension-host.sh production"

[[actions]]
name = "CLI"
icon = "run"
command = '''
npm run cli:build
npm run cli:run
'''

[[actions]]
name = "npm install"
icon = "tool"
command = '''
rm node_modules
rm webview-ui/node_modules
npm run install:all
'''

[[actions]]
name = "pull main"
icon = "tool"
command = '''
git fetch origin main                                                                                                                                                             
                                                                                                                                                                                
if ! git merge-base --is-ancestor main origin/main; then                                                                                                                          
  echo "Local main has commits not on origin/main. Aborting..."                                                                                                                     
  exit 1                                                                                                                                                                          
fi

git update-ref refs/heads/main refs/remotes/origin/main
echo "main updated to $(git rev-parse --short main)"
'''
