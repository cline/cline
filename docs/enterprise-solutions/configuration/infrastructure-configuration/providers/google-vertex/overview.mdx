---
title: "Google Vertex AI Configuration"
sidebarTitle: "Google Vertex"
description: "Configure Google Vertex AI for your Cline deployment"
---

<Info>
**Configuration Path: Self-Hosted**

This guide covers Vertex AI configuration for self-hosted deployments. For simple web-based setup, see [Google Vertex SaaS Configuration](/enterprise-solutions/configuration/remote-configuration/google-vertex/admin-configuration).
</Info>

Google Vertex AI provides enterprise access to Gemini and other Google AI models through Google Cloud Platform. Configure Cline to use Vertex AI with service account authentication.

## What You'll Need

Before configuring Cline to use Vertex AI:

1. **Google Cloud Project** with Vertex AI API enabled
2. **Service Account** with Vertex AI permissions
3. **Service Account Key** (JSON file)
4. **Region** where Vertex AI is available

## Configuration

Configure Vertex AI through your remote configuration JSON:

```json
{
  "providerSettings": {
    "provider": "vertex",
    "vertexProject": "my-project-id",
    "vertexRegion": "us-central1"
  }
}
```

### Configuration Options

| Field | Description | Required |
|-------|-------------|----------|
| `provider` | Must be `"vertex"` | Yes |
| `vertexProject` | Google Cloud project ID | Yes |
| `vertexRegion` | GCP region (e.g., `us-central1`) | Yes |
| `vertexServiceAccountKey` | Path to service account JSON key | Yes |

## Setting Up Google Cloud

### 1. Enable Vertex AI API

```bash
# Enable the Vertex AI API
gcloud services enable aiplatform.googleapis.com --project=my-project-id
```

### 2. Create Service Account

```bash
# Create service account
gcloud iam service-accounts create cline-vertex-sa \
  --display-name="Cline Vertex AI" \
  --project=my-project-id

# Grant required permissions
gcloud projects add-iam-policy-binding my-project-id \
  --member="serviceAccount:cline-vertex-sa@my-project-id.iam.gserviceaccount.com" \
  --role="roles/aiplatform.user"

# Create and download key
gcloud iam service-accounts keys create cline-vertex-key.json \
  --iam-account=cline-vertex-sa@my-project-id.iam.gserviceaccount.com
```

### 3. Configure Cline

Add the service account key to your configuration:

```json
{
  "providerSettings": {
    "provider": "vertex",
    "vertexProject": "my-project-id",
    "vertexRegion": "us-central1",
    "vertexServiceAccountKey": "/path/to/cline-vertex-key.json"
  }
}
```

## Available Models

Common Vertex AI models for Cline:

| Model ID | Description | Context Window |
|----------|-------------|----------------|
| `gemini-2.0-flash-exp` | Latest Gemini Flash (experimental) | 1M tokens |
| `gemini-1.5-pro-002` | Gemini Pro (stable) | 2M tokens |
| `gemini-1.5-flash-002` | Gemini Flash (stable) | 1M tokens |

<Note>
Model availability varies by region. Check the Vertex AI documentation for region-specific availability.
</Note>

## Regional Deployment

Vertex AI is available in multiple Google Cloud regions:

- **us-central1** (Iowa)
- **us-east4** (Northern Virginia)
- **europe-west1** (Belgium)
- **asia-southeast1** (Singapore)

Choose regions based on:
- **Latency**: Closer to your users
- **Compliance**: Data residency requirements
- **Model Availability**: Not all models in all regions

## Authentication Methods

### Service Account Key (Recommended)

Use a service account JSON key file for authentication:

1. Create service account in Google Cloud Console
2. Grant `roles/aiplatform.user` permission
3. Download JSON key file
4. Configure path in Cline settings

### Workload Identity (GKE)

For Kubernetes deployments on GKE, use Workload Identity:

```yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: cline-vertex-sa
  annotations:
    iam.gke.io/gcp-service-account: cline-vertex-sa@my-project-id.iam.gserviceaccount.com
```

## Best Practices

### Security
- **Service Account Keys**: Store securely, never commit to version control
- **Least Privilege**: Grant only `aiplatform.user` role
- **Key Rotation**: Rotate service account keys regularly (e.g., every 90 days)
- **Audit Logging**: Enable Cloud Audit Logs for compliance

### Cost Management
- **Choose Appropriate Models**: Use Flash for speed, Pro for complex tasks
- **Monitor Usage**: Track via Google Cloud Console billing
- **Set Budget Alerts**: Configure budget alerts in GCP
- **Optimize Prompts**: Reduce token usage through efficient prompting

### Performance
- **Regional Selection**: Deploy in region closest to users
- **Model Selection**: Flash models are faster but less capable
- **Concurrent Requests**: Vertex AI handles concurrency automatically

## Troubleshooting

### Common Issues

**"Permission Denied" Errors**

Verify service account has required permissions:
```bash
gcloud projects get-iam-policy my-project-id \
  --flatten="bindings[].members" \
  --filter="bindings.members:serviceAccount:cline-vertex-sa@my-project-id.iam.gserviceaccount.com"
```

**"API Not Enabled" Errors**

Enable the Vertex AI API:
```bash
gcloud services enable aiplatform.googleapis.com --project=my-project-id
```

**"Model Not Found" Errors**

Check model availability in your region:
```bash
gcloud ai models list --region=us-central1 --project=my-project-id
```

## Example Configuration

Complete example for production:

```json
{
  "providerSettings": {
    "provider": "vertex",
    "vertexProject": "my-company-prod",
    "vertexRegion": "us-central1",
    "vertexServiceAccountKey": "/secure/path/to/service-account.json"
  },
  "modelSettings": {
    "defaultModel": "gemini-1.5-pro-002"
  }
}
```

## Related Resources

<CardGroup cols={2}>
  <Card title="Vertex AI Documentation" icon="book" href="https://cloud.google.com/vertex-ai/docs">
    Official Google Vertex AI documentation
  </Card>
  
  <Card title="Service Accounts" icon="key" href="https://cloud.google.com/iam/docs/service-accounts">
    Google Cloud service account best practices
  </Card>
  
  <Card title="Gemini Models" icon="brain" href="https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini">
    Gemini model documentation
  </Card>
  
  <Card title="Vertex AI Pricing" icon="dollar-sign" href="https://cloud.google.com/vertex-ai/pricing">
    Google Vertex AI pricing details
  </Card>
</CardGroup>
