---
title: "GitHub Actions 통합"
description: "GitHub Actions에서 Cline CLI를 사용해 댓글에 @cline을 멘션하면 GitHub 이슈에 자동으로 응답합니다."
---

# GitHub 통합 샘플

AI로 GitHub 이슈 분석을 자동화하세요. 어떤 이슈 댓글에든 `@cline`을 멘션하면 파일을 읽고 코드를 분석해 실행 가능한 인사이트를 제공하는 자율 조사 작업이 트리거됩니다. 모든 과정은 GitHub Actions에서 자동으로 실행됩니다.

<Note>
**Cline CLI가 처음이신가요?** 이 샘플은 Cline CLI 기본 사용법을 알고 있고 [설치 가이드](https://docs.cline.bot/cline-cli/installation)를 완료했다는 전제로 작성되었습니다. 처음이라면 더 간단한 [GitHub RCA 샘플](./github-issue-rca)부터 시작하는 것을 권장합니다. GitHub Actions 설정 전에 기본기를 익히는 데 도움이 됩니다.
</Note>

## 워크플로

이슈 댓글에 `@cline`을 멘션하면 Cline이 실행됩니다:

<Frame>
  <img src="https://storage.googleapis.com/cline_public_images/ss0a-comment.png" alt="@cline 멘션이 있는 이슈 댓글" width="600" />
</Frame>

Cline의 자동 분석 결과가 새 댓글로 표시됩니다. 실제 코드베이스에서 추출한 인사이트를 제공합니다:

<Frame>
  <img src="https://storage.googleapis.com/cline_public_images/ss0b-final.png" alt="Cline의 자동 분석 응답" width="600" />
</Frame>

파일 탐색부터 결과 게시까지 전체 조사가 GitHub Actions에서 자율적으로 실행됩니다.

이제 저장소를 설정해 봅시다.

## 사전 준비

시작하기 전에 다음이 필요합니다:

- **Cline CLI 지식** - [설치 가이드](https://docs.cline.bot/cline-cli/installation)를 완료하고 기본 사용법을 이해
- **GitHub 저장소** - Actions와 secrets를 설정할 수 있는 관리자 권한
- **GitHub Actions 이해** - 워크플로 및 CI/CD에 대한 기본 지식
- **API 제공자 계정** - OpenRouter, Anthropic 등 API 키 보유

## 설정

### 1. 워크플로 파일 복사

샘플 워크플로 파일을 저장소로 복사하세요. GitHub Actions가 인식하고 실행하려면 워크플로 파일을 저장소 루트의 `.github/workflows/` 디렉터리에 두어야 합니다. 여기서는 `cline-responder.yml`로 이름을 지정합니다.

```bash
# 저장소 루트에서
mkdir -p .github/workflows
curl -o .github/workflows/cline-responder.yml https://raw.githubusercontent.com/cline/cline/main/src/samples/cli/github-integration/cline-responder.yml
```

또는 아래 전체 워크플로 내용을 `.github/workflows/cline-responder.yml`에 직접 복사해도 됩니다:

<Accordion title="전체 cline-responder.yml 워크플로 보기">
```yaml
name: Cline Issue Assistant

on:
  issue_comment:
    types: [created, edited]

permissions:
  issues: write

jobs:
  respond:
    runs-on: ubuntu-latest
    environment: cline-actions
    steps:
      - name: Check for @cline mention
        id: detect
        uses: actions/github-script@v7
        with:
          script: |
            const body = context.payload.comment?.body || "";
            const isPR = !!context.payload.issue?.pull_request;
            const hit = body.toLowerCase().includes("@cline");
            core.setOutput("hit", (!isPR && hit) ? "true" : "false");
            core.setOutput("issue_number", String(context.payload.issue?.number || ""));
            core.setOutput("issue_url", context.payload.issue?.html_url || "");
            core.setOutput("comment_body", body);

      - name: Checkout repository
        if: steps.detect.outputs.hit == 'true'
        uses: actions/checkout@v4

      # Node v20 is needed for Cline CLI on GitHub Actions Linux
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Setup Cline CLI
        if: steps.detect.outputs.hit == 'true'
        run: |
          # Install the Cline CLI
          sudo npm install -g cline

      - name: Create Cline Instance
        if: steps.detect.outputs.hit == 'true'
        env:
          OPENROUTER_API_KEY: ${{ secrets.OPENROUTER_API_KEY }}
          CLINE_DIR: ${{ runner.temp }}/cline
        run: |
          # Create instance and capture output
          INSTANCE_OUTPUT=$(cline instance new 2>&1)
          
          # Parse address from output (format: "  Address: 127.0.0.1:36733")
          CLINE_ADDRESS=$(echo "$INSTANCE_OUTPUT" | grep "Address:" | grep -oE '([0-9]{1,3}\.){3}[0-9]{1,3}:[0-9]+')
          echo "CLINE_ADDRESS=$CLINE_ADDRESS" >> $GITHUB_ENV
          
          # Configure API key
          cline config set open-router-api-key=$OPENROUTER_API_KEY --address $CLINE_ADDRESS -v

      - name: Download analyze script
        if: steps.detect.outputs.hit == 'true'
        run: |
          export GITORG="YOUR-GITHUB-ORG"
          export GITREPO="YOUR-GITHUB-REPO"

          curl -L https://raw.githubusercontent.com/${GITORG}/${GITREPO}/refs/heads/main/git-scripts/analyze-issue.sh -o analyze-issue.sh
          chmod +x analyze-issue.sh

      - name: Run analysis
        if: steps.detect.outputs.hit == 'true'
        id: analyze
        env:
          ISSUE_URL: ${{ steps.detect.outputs.issue_url }}
          COMMENT: ${{ steps.detect.outputs.comment_body }}
          CLINE_ADDRESS: ${{ env.CLINE_ADDRESS }}
        run: |
          set -euo pipefail
          
          RESULT=$(./analyze-issue.sh "${ISSUE_URL}" "Analyze this issue. The user asked: ${COMMENT}" "$CLINE_ADDRESS")
          
          {
            echo 'result<<EOF'
            printf "%s\n" "$RESULT"
            echo 'EOF'
          } >> "$GITHUB_OUTPUT"

      - name: Post response
        if: steps.detect.outputs.hit == 'true'
        uses: actions/github-script@v7
        env:
          ISSUE_NUMBER: ${{ steps.detect.outputs.issue_number }}
          RESULT: ${{ steps.analyze.outputs.result }}
        with:
          script: |
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: Number(process.env.ISSUE_NUMBER),
              body: process.env.RESULT || "(no output)"
            });
```
</Accordion>

<Warning>
**커밋 전에 워크플로 파일을 반드시 수정해야 합니다!**

`.github/workflows/cline-responder.yml`를 열고 워크플로의 "Download analyze script" 단계에서 분석 스크립트가 저장된 GitHub 조직과 저장소를 지정하세요:

```yaml
export GITORG="YOUR-GITHUB-ORG"      # 반드시 변경!
export GITREPO="YOUR-GITHUB-REPO"    # 반드시 변경!
```

**예시:** 저장소가 `github.com/acme/myproject`라면 다음과 같이 설정합니다:
```yaml
export GITORG="acme"
export GITREPO="myproject"
```

이 설정은 3단계에서 커밋한 분석 스크립트를 다운로드할 위치를 워크플로에 알려줍니다.
</Warning>

워크플로는 새 이슈 또는 업데이트된 이슈를 감지하고 `@cline` 멘션 여부를 확인한 뒤,
Cline CLI 인스턴스를 시작해 이슈를 파고들고, 결과를 이슈 댓글로 응답합니다.

### 2. API 키 구성

AI 제공자 API 키를 저장소 시크릿으로 추가하세요:

1. GitHub 저장소로 이동
2. **Settings** → **Environment**로 이동해 새 환경을 추가합니다.

   <Frame>
     <img src="https://storage.googleapis.com/cline_public_images/ss01-environment.png" alt="Actions 시크릿으로 이동" width="600" />
   </Frame>

   `cline-responder.yml` 상단의 `environment` 값과 일치하도록 이름을 "cline-actions"로 지정하세요.

3. **New repository secret** 클릭
4. [openrouter.com](https://openrouter.com)의 API 키 값을 사용해 `OPENROUTER_API_KEY` 시크릿을 추가

   <Frame>
     <img src="https://storage.googleapis.com/cline_public_images/ss02-api-key.png" alt="API 키 시크릿 추가" width="600" />
   </Frame>

5. 시크릿이 올바르게 설정되었는지 확인:

   <Frame>
     <img src="https://storage.googleapis.com/cline_public_images/ss03-ready.png" alt="API 키가 설정됨" width="600" />
   </Frame>

이제 GitHub Action에서 필요한 자격 증명을 Cline에 제공할 수 있습니다.

### 3. 분석 스크립트 추가

`github-issue-rca` 샘플의 분석 스크립트를 저장소에 추가하세요. **먼저 저장소 루트에 `git-scripts` 디렉터리를 생성해야 합니다.** 다음 옵션 중 하나를 선택하세요:

**옵션 A: 직접 다운로드(권장)**

```bash
# 저장소 루트에서 디렉터리 생성 및 스크립트 다운로드
mkdir -p git-scripts
curl -o git-scripts/analyze-issue.sh https://raw.githubusercontent.com/cline/cline/main/src/samples/cli/github-issue-rca/analyze-issue.sh
chmod +x git-scripts/analyze-issue.sh
```

**옵션 B: 수동 복사/붙여넣기**

디렉터리와 파일을 수동으로 만든 다음 스크립트 내용을 붙여넣습니다:

```bash
# 저장소 루트에서
mkdir -p git-scripts
# 원하는 편집기로 파일 생성/편집
nano git-scripts/analyze-issue.sh  # 또는 vim, code 등
```

<Accordion title="전체 analyze-issue.sh 스크립트 보기">
```bash
#!/bin/bash
# Analyze a GitHub issue using Cline CLI

if [ -z "$1" ]; then
    echo "Usage: $0 <github-issue-url> [prompt] [address]"
    echo "Example: $0 https://github.com/owner/repo/issues/123"
    echo "Example: $0 https://github.com/owner/repo/issues/123 'What is the root cause of this issue?'"
    echo "Example: $0 https://github.com/owner/repo/issues/123 'What is the root cause of this issue?' 127.0.0.1:46529"
    exit 1
fi

# Gather the args
ISSUE_URL="$1"
PROMPT="${2:-What is the root cause of this issue?}"
if [ -n "$3" ]; then
    ADDRESS="--address $3"
fi

# Ask Cline for its analysis, showing only the summary
cline -y "$PROMPT: $ISSUE_URL" --mode act $ADDRESS -F json | \
    sed -n '/^{/,$p' | \
    jq -r 'select(.say == "completion_result") | .text' | \
    sed 's/\\n/\n/g'
```

스크립트 내용을 붙여넣은 뒤 실행 권한을 부여하세요:
```bash
chmod +x git-scripts/analyze-issue.sh
```
</Accordion>

이 분석 스크립트는 Cline에 GitHub 이슈를 대상으로 프롬프트를 실행하도록 요청하고,
결과를 요약해 이슈 답변에 넣습니다.

### 4. 커밋 및 푸시

```bash
git add .github/workflows/cline-responder.yml
git add git-scripts/analyze-issue.sh
git commit -m "Add Cline issue assistant workflow"
git push
```

## 사용법

설정이 끝나면 이슈 댓글에 `@cline`을 멘션하세요:

```
@cline what's causing this error?

@cline analyze the root cause

@cline what are the security implications?
```

GitHub Actions는 다음을 수행합니다:
1. `@cline` 멘션 감지
2. Cline CLI 인스턴스 시작
3. 분석 스크립트 다운로드
4. act 모드 + yolo(완전 자율)로 이슈 분석
5. Cline의 분석 결과를 새 댓글로 게시

**참고**: 워크플로는 이슈 댓글에서만 트리거되며 PR 댓글에서는 실행되지 않습니다.

## 동작 방식

워크플로(`cline-responder.yml`)는 다음을 수행합니다:

1. 이슈 댓글(생성 또는 수정)에 **트리거**
2. `@cline` 멘션을 **감지**(대소문자 무시)
3. npm으로 Cline CLI를 전역 **설치**
4. `cline instance new`로 Cline 인스턴스 **생성**
5. `cline config set open-router-api-key=... --address ...`로 인증 **구성**
6. `github-issue-rca` 샘플의 `analyze-issue.sh` 스크립트 **다운로드**
7. 인스턴스 주소로 분석 **실행**
8. 분석 결과를 댓글로 **게시**

## 관련 샘플

- **[github-issue-rca](./github-issue-rca)**: 이 통합을 구동하는 재사용 스크립트
