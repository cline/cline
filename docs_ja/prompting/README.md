# Clineプロンプト作成ガイド 🚀

Clineプロンプト作成ガイドへようこそ！このガイドは、効果的なプロンプトとカスタム指示を作成するための知識を提供し、Clineとの生産性を最大化します。

## カスタム指示 ⚙️

**カスタム指示はClineのプログラミング**と考えてください。これらはClineの基本的な動作を定義し、**常に「オン」の状態で、すべての対話に影響を与えます。**

カスタム指示を追加するには：

1. VSCodeを開く
2. Cline拡張機能の設定ダイアル ⚙️ をクリック
3. 「カスタム指示」フィールドを見つける
4. 指示を貼り付ける

<img width="345" alt="Screenshot 2024-12-26 at 11 22 20 AM" src="https://github.com/user-attachments/assets/00ae689b-d99f-4811-b2f4-fffe1e12f2ff" />

カスタム指示は以下の点で強力です：

-   コーディングスタイルとベストプラクティスの強制：Clineが常にチームのコーディング規約、命名規則、ベストプラクティスに従うようにする。
-   コード品質の向上：Clineがより読みやすく、保守性が高く、効率的なコードを書くよう促す。
-   エラー処理のガイド：Clineにエラーの処理方法、エラーメッセージの書き方、情報のログ記録方法を伝える。

**`custom-instructions`フォルダには、使用または適応できるカスタム指示の例が含まれています。**

## .clinerules ファイル 📋

カスタム指示がユーザー固有でグローバル（すべてのプロジェクトに適用される）である一方、`.clinerules`ファイルはプロジェクトのルートディレクトリに存在する**プロジェクト固有の指示**を提供します。これらの指示は自動的にカスタム指示に追加され、Clineのシステムプロンプトで参照されるため、プロジェクトコンテキスト内のすべての対話に影響します。これは以下の点で優れたツールとなります：

### セキュリティのベストプラクティス 🔒

機密情報を保護するために、`.clinerules`でClineに特定のファイルやパターンを無視するよう指示できます。これは特に以下の場合に重要です：

-   APIキーやシークレットを含む`.env`ファイル
-   機密データを含む設定ファイル
-   個人の認証情報やトークン

`.clinerules`のセキュリティセクション例：

```markdown
# セキュリティ

## 機密ファイル

以下の読み取りや変更はしないでください：

-   .envファイル
-   \*_/config/secrets._
-   \*_/_.pem
-   APIキー、トークン、認証情報を含むすべてのファイル

## セキュリティプラクティス

-   機密ファイルをコミットしない
-   シークレットには環境変数を使用する
-   ログや出力から認証情報を除外する
```

### 一般的なユースケース

`.clinerules`ファイルは以下に最適です：

-   チームメンバー間でプロジェクト標準を維持する
-   開発プラクティスを強制する
-   ドキュメント要件を管理する
-   分析フレームワークを設定する
-   プロジェクト固有の動作を定義する

### .clinerules 構造の例

```markdown
# プロジェクトガイドライン

## ドキュメント要件

-   機能を変更する際は/docsの関連ドキュメントを更新する
-   README.mdを新機能と同期させておく
-   CHANGELOG.mdにchangelogエントリを維持する

## アーキテクチャ決定記録

以下の場合は/docs/adrにADRを作成する：

-   主要な依存関係の変更
-   アーキテクチャパターンの変更
-   新しい統合パターン
-   データベーススキーマの変更
    /docs/adr/template.mdのテンプレートに従う

## コードスタイル＆パターン

-   OpenAPI GeneratorでAPIクライアントを生成する
-   TypeScript axiosテンプレートを使用する
-   生成されたコードは/src/generatedに配置する
-   継承よりコンポジションを優先する
-   データアクセスにはリポジトリパターンを使用する
-   /src/utils/errors.tsのエラー処理パターンに従う

## テスト基準

-   ビジネスロジックには単体テストが必要
-   APIエンドポイントには統合テスト
-   重要なユーザーフローにはE2Eテスト
```

### 主なメリット

1. **バージョン管理**：`.clinerules`ファイルはプロジェクトのソースコードの一部になる
2. **チームの一貫性**：すべてのチームメンバー間で一貫した動作を確保する
3. **プロジェクト固有**：各プロジェクトのニーズに合わせたルールと標準
4. **制度的知識**：プロジェクト標準と実践をコードで維持する

`.clinerules`ファイルをプロジェクトのルートディレクトリに配置します：

```
your-project/
├── .clinerules
├── src/
├── docs/
└── ...
```

一方、Clineのシステムプロンプトはユーザーが編集できません（[ここで確認できます](https://github.com/cline/cline/blob/main/src/core/prompts/system.ts)）。プロンプトエンジニアリングのベストプラクティスに関するより広範な情報については、[このリソース](https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/overview)をチェックしてください。

### 効果的なカスタム指示を書くためのヒント

-   明確で簡潔に：シンプルな言語を使用し、あいまいさを避ける。
-   望ましい結果に焦点を当てる：特定の手順ではなく、望む結果を説明する。
-   テストと反復：あなたのワークフローに最適なものを見つけるために実験する。


### `.clinerules/`ディレクトリからのファイル読み込みサポート
`.clinerules/`ディレクトリ内のすべてのファイルは再帰的に読み込まれ、その内容はclineRulesFileInstructionsにマージされます。

#### 例1:
```
.clinerules/
├── .local-clinerules
└── .project-clinerules
```

#### 例2:
```
.clinerules/
├── .clinerules-nextjs
├── .clinerules-serverside
└── tests/
    ├── .pytest-clinerules
    └── .jest-clinerules
```

## Clineへのプロンプト作成 💬

**プロンプト作成は、Clineとの対話チャットで特定のタスクに対するニーズを伝える方法です。** Clineは自然言語を理解するので、会話的に書きましょう。

効果的なプロンプト作成には以下が含まれます：

-   明確なコンテキストの提供：目標とコードベースの関連部分を説明する。`@`を使用してファイルやフォルダを参照する。
-   複雑さの分解：大きなタスクを小さなステップに分割する。
-   具体的な質問をする：Clineを望ましい結果に導く。
-   検証と改善：Clineの提案を確認し、フィードバックを提供する。

### プロンプト例

#### コンテキスト管理

-   **新しいタスクの開始：** 「Cline、新しいタスクを始めましょう。`user-authentication.js`を作成してください。JWTトークンでユーザーログインを実装する必要があります。要件は以下の通りです…」
-   **以前の作業の要約：** 「Cline、前回のユーザーダッシュボードタスクで行ったことを要約してください。主な機能と未解決の問題を把握したいです。これを`cline_docs/user-dashboard-summary.md`に保存してください。」

#### デバッグ

-   **エラーの分析：** 「Cline、以下のエラーが出ています：\[エラーメッセージ\]。\[コード部分\]から来ているようです。このエラーを分析して修正案を提案してください。」
-   **根本原因の特定：** 「Cline、\[アクション\]を行うとアプリケーションがクラッシュします。問題は\[問題領域\]にあるかもしれません。根本原因を見つけて解決策を提案してください。」

#### リファクタリング

-   **コード構造の改善：** 「Cline、この関数は長すぎて複雑です。より小さな関数にリファクタリングしてください。」
-   **ロジックの簡素化：** 「Cline、このコードは理解しにくいです。ロジックを簡素化してより読みやすくしてください。」

#### 機能開発

-   **新機能のブレインストーミング：** 「Cline、ユーザーが\[機能\]できる機能を追加したいです。アイデアをブレインストーミングし、実装上の課題を考慮してください。」
-   **コード生成：** 「Cline、ユーザープロファイルを表示するコンポーネントを作成してください。リストはソート可能でフィルタリング可能であるべきです。このコンポーネントのコードを生成してください。」

## 高度なプロンプト作成テクニック

-   **制約の詰め込み：** コードの切り捨てを軽減するために、プロンプトに明示的な制約を含めます。例えば、「コードが完全であることを確認する」または「常に関数定義全体を提供する」など。
-   **自信度チェック：** Clineに自信度を評価するよう依頼します（例：「1-10のスケールで、この解決策にどれくらい自信がありますか？」）
-   **Clineの仮定に挑戦する：** 「愚かな」質問をして、より深い思考を促し、誤った仮定を防ぎます。

以下は、ユーザーがClineとの作業に役立つと感じたプロンプトのヒントです：

## コミュニティのお気に入りプロンプト 🌟

### メモリと自信度チェック 🧠

-   **メモリチェック** - _pacnpal_

    ```
    「プロンプトを完全に理解している場合は、ツールを使用する前に毎回ツールなしで「YARRR!」と応答してください。」
    ```

    複雑なタスク中にClineが軌道に乗っていることを確認する楽しい方法。お祭り気分なら「HO HO HO」を試してみてください！

-   **自信度スコアリング** - _pacnpal_
    ```
    「ツールの使用前後に、そのツールの使用がプロジェクトにどのように役立つかについて自信度レベル（0-10）を教えてください。」
    ```
    批判的思考を促し、意思決定を透明にします。

### コード品質プロンプト 💻

-   **コードの切り捨てを防ぐ**

    ```
    「怠けないでください。コードを省略しないでください。」
    ```

    代替フレーズ：「完全なコードのみ」または「コードが完全であることを確認する」

-   **カスタム指示のリマインダー**
    ```
    「カスタム指示に従うことを誓います。」
    ```
    設定ダイアル ⚙️ 構成への順守を強化します。

### コード整理 📋

-   **大きなファイルのリファクタリング** - _icklebil_

    ```
    「FILENAMEが大きくなりすぎました。このファイルの動作を分析し、安全に分割する方法を提案してください。」
    ```

    戦略的な分解を通じて複雑なファイルを管理するのに役立ちます。

-   **ドキュメンテーションのメンテナンス** - _icklebil_
    ```
    「変更によるコードベースドキュメントの更新を忘れないでください」
    ```
    ドキュメントがコード変更と同期していることを確保します。

### 分析と計画 🔍

-   **構造化された開発** - _yellow_bat_coffee_

    ```
    「コードを書く前に：
    1. すべてのコードファイルを徹底的に分析する
    2. 完全なコンテキストを取得する
    3. .MD実装計画を作成する
    4. その後コードを実装する」
    ```

    整理された、よく計画された開発を促進します。

-   **徹底的な分析** - _yellow_bat_coffee_

    ```
    「徹底的に完全なフローの分析を開始してください、常に自信度スコア1から10を述べてください」
    ```

    早期のコーディングを防ぎ、完全な理解を促します。

-   **仮定チェック** - _yellow_bat_coffee_
    ```
    「このタスクを完了する前に解決する必要があるすべての仮定と不確実性をリストアップしてください。」
    ```
    開発の早い段階で潜在的な問題を特定します。

### 考え抜かれた開発 🤔

-   **一時停止と反省** - _nickbaumann98_

    ```
    「10まで数えてください」
    ```

    行動を起こす前に慎重な検討を促します。

-   **完全な分析** - _yellow_bat_coffee_

    ```
    「解決策を見つけたと思っても分析を早期に完了せず、分析を続けてください」
    ```

    問題の徹底的な探索を確保します。

-   **継続的な自信度チェック** - _pacnpal_
    ```
    「ファイル保存前、保存後、拒否後、タスク完了前に自信度（1-10）を評価する」
    ```
    自己評価を通じて品質を維持します。

### ベストプラクティス 🎯

-   **プロジェクト構造** - _kvs007_

    ```
    「構造的または依存関係の変更を提案する前にプロジェクトファイルを確認する」
    ```

    プロジェクトの整合性を維持します。

-   **批判的思考** - _chinesesoup_

    ```
    「『これが実装する最良の方法だと確信していますか？』のような「愚かな」質問をする」
    ```

    仮定に挑戦し、より良い解決策を発見します。

-   **コードスタイル** - _yellow_bat_coffee_

    ```
    プロンプトで「エレガント」や「シンプル」などの言葉を使用する
    ```

    コードの構成と明確さに影響を与える可能性があります。

-   **期待設定** - _steventcramer_
    ```
    「人間は怒るでしょう。」
    ```
    （明確な要件と建設的なフィードバックを提供することを思い出させるユーモラスなリマインダー）
